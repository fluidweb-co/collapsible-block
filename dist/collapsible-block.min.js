!function(e,t){"function"==typeof define&&define.amd?define([],t()):"object"==typeof exports?module.exports=t():e.CollapsibleBlock=t()}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";function l(e){e.target.closest(d.handlerSelector)&&(e.preventDefault(),e=e.target.closest(d.handlerSelector),(e=(document.querySelector("#"+e.getAttribute(d.targetAttribute))||e).closest(d.elementSelector))&&s.toggleState(e))}function i(e){s.expand(e.element),requestAnimationFrame(function(){e.element.getBoundingClientRect().height>e.settings.maxHeight&&s.collapse(e.element)})}var a=!1,s={managers:[]},r="collapsed",o="first-expanded",c="expanded",d={},g={elementSelector:"[data-collapsible]",contentElementSelector:"[data-collapsible-content]",handlerSelector:"[data-collapsible-handler]",isCollapsedClass:"is-collapsed",isActivatedClass:"is-activated",targetAttribute:"data-collapsible-target",maxHeightAttribute:"data-collapsible-max-height",createHandlerAttribute:"data-collapsible-create-handler",changeStateOnResizeAttribute:"data-collapsible-change-state-resize",initialState:o,initialStateAttribute:"data-collapsible-initial-state",idPrefix:"collapsible",createHandler:!1,maxHeight:0,handlerTemplate:'<a href="#collapsible" role="button" data-collapsible-handler>Read more</a>'},m=function(){var n={},l=!1,e=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(l=arguments[0],e++);for(;e<arguments.length;e++)!function(e){for(var t in e)e.hasOwnProperty(t)&&(l&&"[object Object]"===Object.prototype.toString.call(e[t])?n[t]=m(n[t],e[t]):n[t]=e[t])}(arguments[e]);return n};return s.getInstance=function(e){for(var t,n=0;n<s.managers.length;n++){var l=s.managers[n];if(l.element==e){t=l;break}}return t},s.collapse=function(e){var t=s.getInstance(e);t&&(e.classList.add(t.settings.isCollapsedClass),t.contentElement.style.height=t.settings.maxHeight+"px")},s.expand=function(e){var t=s.getInstance(e);t&&(e.classList.remove(t.settings.isCollapsedClass),t.contentElement.style.height="")},s.toggleState=function(e){var t=s.getInstance(e);t&&(e.classList.contains(t.settings.isCollapsedClass)?s.expand(e):s.collapse(e))},s.getState=function(e){var t=s.getInstance(e);if(!t)return!1;var n=c;return n=e.classList.contains(t.settings.isCollapsedClass)?r:n},s.initializeElement=function(e){var t={};s.managers.push(t),t.element=e,t.settings=m(d),t.contentElement=t.element.querySelector(t.settings.contentElementSelector),t.contentElement||(t.contentElement=t.element),""==t.element.id&&(t.element.id=t.settings.idPrefix+"_"+s.managers.length),""==t.contentElement.id&&(t.contentElement.id=t.element.id+"__content"),t.contentElement.style.overflow="hidden";var n=t.contentElement.getAttribute(t.settings.maxHeightAttribute);t.settings.maxHeight=n&&""!=n?parseInt(n):t.settings.maxHeight;e=t.element.getAttribute(t.settings.createHandlerAttribute);t.settings.createHandler="true"==e||"false"==e?Boolean(e):t.settings.createHandler,t.settings.createHandler&&(e=(n=t).element,a=n.contentElement,(l=document.createElement("div")).innerHTML=n.settings.handlerTemplate.trim(),n.handlerElement=l.childNodes[0],n.handlerElement.setAttribute(n.settings.targetAttribute,a.id),n.handlerElement.setAttribute("href","#"),n.handlerElement.setAttribute("role","button"),e.insertBefore(l.childNodes[0],a.nextSibling));var l=t.contentElement.getAttribute(t.settings.initialStateAttribute),a=l||t.settings.initialState,l=Array.prototype.indexOf.call(t.element.parentNode.children,t.element);a==c||a==o&&0==l?s.expand(t.element):s.collapse(t.element);l=t.element.getAttribute(t.settings.changeStateOnResizeAttribute);t.settings.changeStateOnResize=!(!l||""==l)&&Boolean(l),t.settings.changeStateOnResize&&(i(t),window.addEventListener("resize",function(){i(t)})),t.isActivated=!0,t.element.classList.add(t.settings.isActivatedClass)},s.init=function(e){if(!a){d=m(g,e);for(var t=document.querySelectorAll(d.elementSelector),n=0;n<t.length;n++)s.initializeElement(t[n]);document.addEventListener("click",l),a=!0}},s});
//# sourceMappingURL=maps/collapsible-block.min.js.map
